(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{122:function(e,t,c){},123:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(1),n=c.n(s),r=c(60),i=c.n(r),o=c(27),l=Object(s.createContext)({}),j=function(e){var t=Object(s.useState)({_id:"",username:"",email:"",password:"",image:"",win:"",draw:"",lose:""}),c=Object(o.a)(t,2),n=c[0],r=c[1],i=Object(s.useState)(!1),j=Object(o.a)(i,2),b=j[0],d=j[1],u=Object(s.useState)([]),h=Object(o.a)(u,2),m={user:n,setUser:r,isAuth:b,setIsAuth:d,players:h[0],setPlayers:h[1]};return Object(a.jsx)(l.Provider,{value:m,children:e.children})},b=(c(68),c(7)),d=c(3),u=(c(69),c(70),c(2));var h=function(e){var t=e.label,c=e.type,s=e.value,n=e.onChange;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:t}),Object(a.jsx)("input",{onChange:n,type:c,className:"form-control",value:s})]})})},m=c(8),p=c.n(m);var O=Object(d.g)((function(e){var t,c=e.formName,n=e.text,r=e.history,i=Object(s.useContext)(l),o=i.user,j=i.setUser,b=(i.isAuth,i.setIsAuth);return"Login"!==c&&(t=Object(a.jsx)(h,{onChange:function(e){j(Object(u.a)(Object(u.a)({},o),{},{email:e.target.value}))},type:"email",label:"Email",value:o.email})),Object(a.jsxs)("div",{className:"container mt-5",children:[Object(a.jsx)("h1",{children:c}),Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("div",{className:"col-lg-8  col-sm-12",children:Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)(h,{onChange:function(e){j(Object(u.a)(Object(u.a)({},o),{},{username:e.target.value}))},type:"text",label:"Username",value:o.username}),t,Object(a.jsx)(h,{onChange:function(e){j(Object(u.a)(Object(u.a)({},o),{},{password:e.target.value}))},type:"password",label:"Password",value:o.password}),Object(a.jsx)("button",{onClick:"Login"===c?function(e){p.a.post("https://tic-tac-toe-uncr.herokuapp.com/app/login",{username:o.username,password:o.password}).then((function(e){"No User Exists"===e.data?(console.log(e),alert("Email and Password didn't match or no exist")):(j(e.data),b(!0),console.log(e.data),r.push("/"))})),p.a.post("https://tic-tac-toe-uncr.herokuapp.com/app/loginstatus",{username:o.username}),e.preventDefault()}:function(e){p.a.post("https://tic-tac-toe-uncr.herokuapp.com/app/register",Object(u.a)(Object(u.a)({},o),{},{login:1})).then((function(e){"User Already Exists"===e.data?(console.log(e),alert("user already exists, login instead!")):(j(e.data),console.log(e.data),b(!0),r.push("/"))})),e.preventDefault()},type:"submit",className:"btn form-btn",children:c}),Object(a.jsx)("a",{href:"/".concat("Login"===c?"Register":"Login"),children:n})]})})})})]})})),x=(c(92),c(25)),f=c.n(x),g=c(4),v=c.n(g);var N=Object(d.g)((function(e){e.history;var t=Object(s.useContext)(l),c=t.user,n=t.setUser,r=(t.setIsAuth,Number(c.lose)),i=Number(c.win);return Object(s.useEffect)((function(){var e,t=f()("https://tic-tac-toe-uncr.herokuapp.com"),a=!0;function s(){for(var e=function(){var e={};return v()(".board button").each((function(){e[v()(this).attr("id")]=v()(this).text()||""})),e}(),t=["XXX","OOO"],c=[e.r0c0+e.r0c1+e.r0c2,e.r1c0+e.r1c1+e.r1c2,e.r2c0+e.r2c1+e.r2c2,e.r0c0+e.r1c0+e.r2c0,e.r0c1+e.r1c1+e.r2c1,e.r0c2+e.r1c2+e.r2c2,e.r0c0+e.r1c1+e.r2c2,e.r0c2+e.r1c1+e.r2c0],a=0;a<c.length;a++)if(c[a]===t[0]||c[a]===t[1])return!0;return!1}function o(){a?(v()("#message").text("Your turn."),v()(".board button").removeAttr("disabled")):(v()("#message").text("Your opponent's turn"),v()(".board button").attr("disabled",!0))}function l(c){a&&(v()(this).text().length||t.emit("make.move",{symbol:e,position:v()(this).attr("id")}))}t.on("move.made",(function(t){v()("#"+t.position).text(t.symbol),a=t.symbol!==e,s()?(a?(v()("#message").text("You lost."),p.a.post("https://tic-tac-toe-uncr.herokuapp.com/app/updatelose",{_id:c._id,lose:r+1}).then((function(e){n(Object(u.a)(Object(u.a)({},c),{},{lose:Number(e.data.lose)+1}))}))):(v()("#message").text("You won!"),p.a.post("https://tic-tac-toe-uncr.herokuapp.com/app/updatewin",{_id:c._id,win:i+1}).then((function(e){console.log(e.data),n(Object(u.a)(Object(u.a)({},c),{},{win:Number(e.data.win)+1}))}))),v()(".board button").attr("disabled",!0)):o()})),t.on("game.begin",(function(t){e=t.symbol,a="X"===e,o()})),t.on("opponent.left",(function(){v()("#message").text("Your opponent left the game."),v()(".board button").attr("disabled",!0)})),v()((function(){v()(".board button").attr("disabled",!0),v()(".board> button").on("click",l)}))}),[]),Object(a.jsxs)("div",{className:"board-container",children:[Object(a.jsx)("div",{id:"message",children:"Waiting for an opponent..."}),Object(a.jsxs)("div",{className:"board",children:[Object(a.jsx)("button",{className:"btn",id:"r0c0"})," ",Object(a.jsx)("button",{className:"btn",id:"r0c1"})," ",Object(a.jsx)("button",{className:"btn",id:"r0c2"}),Object(a.jsx)("button",{className:"btn",id:"r1c0"})," ",Object(a.jsx)("button",{className:"btn",id:"r1c1"})," ",Object(a.jsx)("button",{className:"btn",id:"r1c2"}),Object(a.jsx)("button",{className:"btn",id:"r2c0"})," ",Object(a.jsx)("button",{className:"btn",id:"r2c1"})," ",Object(a.jsx)("button",{className:"btn",id:"r2c2"})]})]})}));var y=Object(d.g)((function(){var e=Object(s.useContext)(l),t=e.user,c=e.setUser,n=e.setIsAuth;return Object(a.jsxs)("div",{className:"profile",id:"profil",children:[Object(a.jsxs)("div",{className:"profile-text",children:[Object(a.jsx)("h3",{className:"heading-3",children:t.username}),Object(a.jsx)(b.b,{to:"/viewprofile",children:Object(a.jsx)("a",{className:"link",children:"View Profile"})}),Object(a.jsx)(b.b,{to:"/login",children:Object(a.jsx)("a",{onClick:function(){p.a.post("https://tic-tac-toe-uncr.herokuapp.com/app/logout",t,{withCredentials:!0}),c({}),n(!1)},className:"link",children:"Log out"})})]}),Object(a.jsx)("img",{src:t.image?"/images/".concat(t.image):"/images/default.png",alt:"profile-pic",className:"profile-pic"})]})})),w=c(62);var C=function(){var e=Object(s.useContext)(l),t=(e.user,e.players),c=e.setPlayers;return Object(a.jsxs)("div",{className:"sidebar",children:[Object(a.jsx)("h2",{className:"heading-2",children:"Online Player"}),Object(a.jsx)("button",{className:"btn invite-btn",onClick:function(){c([]),p.a.get("https://tic-tac-toe-uncr.herokuapp.com/app/onlineplayer").then((function(e){var t=e.data.map((function(e){return e.username}));c(Object(w.a)(t))}))},children:"refresh"}),Object(a.jsx)("ul",{className:"sidebar-content",children:t.map((function(e,t){return Object(a.jsx)("div",{className:"online-player",children:Object(a.jsx)("li",{children:e})},t)}))})]})};var k=Object(d.g)((function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"heading-1",children:"Tic Tac Toe"}),Object(a.jsxs)("div",{className:"container-tictactoe",children:[Object(a.jsx)(C,{}),Object(a.jsx)(N,{}),Object(a.jsx)(y,{})]})]})}));c(122);var A=Object(d.g)((function(){var e=Object(s.useContext)(l).user,t=e.win,c=e.draw,n=e.lose,r=Number(t)+Number(c)+Number(n);return Object(a.jsx)("div",{children:Object(a.jsx)("div",{class:"container container-profile",children:Object(a.jsxs)("div",{class:"card card-profile",children:[Object(a.jsx)("img",{src:e.image?"/images/".concat(e.image):"/images/default.png",class:"card-img-top card-img",alt:"..."}),Object(a.jsxs)("div",{class:"card-body",children:[Object(a.jsx)("h5",{class:"card-title",children:"Profile"}),Object(a.jsxs)("div",{class:"stat",children:[Object(a.jsx)("p",{children:"Username"}),Object(a.jsx)("p",{children:e.username})]}),Object(a.jsxs)("div",{class:"stat",children:[Object(a.jsx)("p",{children:"Email"}),Object(a.jsx)("p",{children:e.email})]}),Object(a.jsxs)("div",{class:"stat",children:[Object(a.jsx)("p",{children:"Main"}),Object(a.jsx)("p",{children:r})]}),Object(a.jsxs)("div",{class:"stat",children:[Object(a.jsx)("p",{children:"Menang"}),Object(a.jsxs)("p",{children:[0===Number(t)?"0%":"".concat(100*(Number(t)/r).toFixed(2),"%"),"(",t,")"]})]}),Object(a.jsxs)("div",{class:"stat",children:[Object(a.jsx)("p",{children:"Seri"}),Object(a.jsxs)("p",{children:[0===Number(c)?"0%":"".concat(100*(Number(c)/r).toFixed(2),"%"),"(",c,")"]})]}),Object(a.jsxs)("div",{class:"stat",children:[Object(a.jsx)("p",{children:"Kalah"}),Object(a.jsxs)("p",{children:[0===Number(n)?"0%":"".concat(100*(Number(n)/r).toFixed(2),"%"),"(",n,")"]})]}),Object(a.jsx)(b.b,{to:"/",children:Object(a.jsx)("button",{class:"btn back-btn invite-btn",children:"Back"})}),Object(a.jsx)(b.b,{to:"/editprofile",children:Object(a.jsx)("button",{class:"btn edit-btn invite-btn",children:"Edit Profile"})})]})]})})})}));var P=Object(d.g)((function(e){e.history;var t=Object(s.useContext)(l),c=t.user,n=t.setUser,r=t.setIsAuth;return Object(a.jsxs)("div",{className:"container mt-5",children:[Object(a.jsx)("h1",{children:"Edit Profile"}),Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsx)("div",{className:"col-lg-8  col-sm-12",children:Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsxs)("form",{onSubmit:function(e){var t=new FormData;t.append("image",c.image),t.append("username",c.username),t.append("email",c.email),t.append("password",c.password),t.append("_id",c._id),p.a.post("https://tic-tac-toe-uncr.herokuapp.com/app/editprofile",t).then((function(e){alert("data successfully changed, please login again!"),r(!1),n({})})),e.preventDefault()},encType:"multipart/form-data",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"file",children:"Photo"}),Object(a.jsx)("input",{onChange:function(e){n(Object(u.a)(Object(u.a)({},c),{},{image:e.target.files[0]}))},type:"file",filename:"image",className:"form-control"})]}),Object(a.jsx)(h,{onChange:function(e){n(Object(u.a)(Object(u.a)({},c),{},{username:e.target.value}))},type:"text",label:"Username",value:c.username}),Object(a.jsx)(h,{onChange:function(e){n(Object(u.a)(Object(u.a)({},c),{},{email:e.target.value}))},type:"email",label:"Email",value:c.email}),Object(a.jsx)(h,{onChange:function(e){n(Object(u.a)(Object(u.a)({},c),{},{password:e.target.value}))},type:"password",label:"Password",value:c.password}),Object(a.jsx)("button",{type:"submit",className:"btn form-btn",children:"Save"})]}),Object(a.jsx)(b.b,{to:"/",children:Object(a.jsx)("a",{className:"btn invite-btn",children:"Cancel"})})]})})})})]})}));var E=function(){var e=Object(s.useContext)(l),t=(e.user,e.isAuth);return e.players,e.setPlayers,Object(a.jsx)(b.a,{children:Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("header",{className:"App-header",children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{exact:!0,path:"/",children:t?Object(a.jsx)(k,{}):Object(a.jsx)(d.a,{to:"/login"})}),Object(a.jsx)(d.b,{path:"/viewprofile",children:t?Object(a.jsx)(A,{}):Object(a.jsx)(d.a,{to:{pathname:"/login"}})}),Object(a.jsx)(d.b,{path:"/editprofile",children:t?Object(a.jsx)(P,{}):Object(a.jsx)(d.a,{to:{pathname:"/login"}})}),Object(a.jsx)(d.b,{path:"/login",children:t?Object(a.jsx)(d.a,{to:{pathname:"/"}}):Object(a.jsx)(O,{formName:"Login",text:"Don't have an account yet?"})}),Object(a.jsx)(d.b,{path:"/register",children:t?Object(a.jsx)(d.a,{to:{pathname:"/"}}):Object(a.jsx)(O,{formName:"Register",text:"Already have an account?"})})]})})})})};i.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(j,{children:Object(a.jsx)(E,{})})}),document.getElementById("root"))},69:function(e,t,c){},70:function(e,t,c){window.$=window.jQuery=c(4)},92:function(e,t,c){}},[[123,1,2]]]);
//# sourceMappingURL=main.0f5f37eb.chunk.js.map